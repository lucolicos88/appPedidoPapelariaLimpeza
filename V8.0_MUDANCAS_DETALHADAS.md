# 📋 VERSÃO 8.0 - MUDANÇAS DETALHADAS

## 🎯 VISÃO GERAL

A versão 8.0 reestrutura completamente o aplicativo com foco em:
- **Organização por função** - Separação clara entre solicitação e gestão de pedidos
- **Permissões refinadas** - Controle de acesso por tipo de usuário
- **Upload de imagens** - Fotos de produtos
- **Relatórios avançados** - Múltiplos relatórios com insights
- **Correções de bugs** - Erros em Gerenciamento e Configurações

---

## 📊 ESTRUTURA DO MENU (ANTES vs DEPOIS)

### **ANTES (v7.0):**
1. 📊 Dashboard
2. 🛒 Pedidos
3. 📦 Produtos
4. 📊 Estoque
5. 📈 Gerenciamento
6. 📄 Relatórios
7. ⚙️ Configurações

### **DEPOIS (v8.0):**
1. 📊 **Dashboard** - Apenas Gestor e Admin
2. ➕ **Solicitação** - Todos os usuários (nova aba)
3. 🛒 **Pedidos** - Todos (gestão + baixa de produtos)
4. 📦 **Produtos** - Gestor e Admin (cadastro completo com fotos)
5. 📊 **Estoque** - Gestor e Admin (apenas entrada)
6. 📋 **Movimentação** - Gestor e Admin (era "Gerenciamento")
7. 📈 **Relatórios** - Gestor e Admin (múltiplos relatórios)
8. ⚙️ **Configurações** - Apenas Admin

---

## 🔐 PERMISSÕES POR ABA

| Aba | Admin | Gestor | Funcionário |
|-----|-------|--------|-------------|
| **Dashboard** | ✅ Sim | ✅ Sim | ❌ Não |
| **Solicitação** | ✅ Sim | ✅ Sim | ✅ **Sim** |
| **Pedidos** | ✅ Sim | ✅ Sim | ✅ **Sim (view only)** |
| **Produtos** | ✅ Sim | ✅ Sim | ❌ Não |
| **Estoque** | ✅ Sim | ✅ Sim | ❌ Não |
| **Movimentação** | ✅ Sim | ✅ Sim | ❌ Não |
| **Relatórios** | ✅ Sim | ✅ Sim | ❌ Não |
| **Configurações** | ✅ Sim | ❌ Não | ❌ Não |

---

## 🆕 NOVAS FUNCIONALIDADES

### **1. ABA "SOLICITAÇÃO" (NOVA)**

**Objetivo:** Simplificar processo de solicitar pedidos

**Recursos:**
- Formulário simplificado de solicitação
- Busca rápida de produtos por nome ou código
- Preview dos produtos selecionados
- Envio direto para aprovação
- Histórico de solicitações do usuário

**Diferença da aba "Pedidos":**
- **Solicitação:** Apenas criar novos pedidos (simples, rápido)
- **Pedidos:** Ver todos os pedidos, editar, aprovar, dar baixa, cancelar (completo)

**HTML:**
```html
<section class="page-section" id="page-solicitacao">
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">➕ Nova Solicitação de Pedido</h2>
    </div>

    <form id="formSolicitacao">
      <!-- Seletor de Tipo -->
      <div class="form-group">
        <label class="form-label">Tipo de Pedido *</label>
        <select class="form-control" id="solicitacaoTipo" required>
          <option value="">Selecione...</option>
          <option value="Papelaria">Papelaria</option>
          <option value="Limpeza">Limpeza</option>
        </select>
      </div>

      <!-- Busca de Produtos -->
      <div class="form-group">
        <label class="form-label">Buscar Produto</label>
        <input type="text" class="form-control" id="buscaProduto"
               placeholder="Digite nome ou código do produto...">
        <div id="resultadosBusca"></div>
      </div>

      <!-- Produtos Selecionados -->
      <div class="form-group">
        <label class="form-label">Produtos Selecionados</label>
        <div id="produtosSelecionados"></div>
      </div>

      <!-- Observações -->
      <div class="form-group">
        <label class="form-label">Observações</label>
        <textarea class="form-control" id="solicitacaoObs" rows="3"></textarea>
      </div>

      <button type="submit" class="btn btn-success">✅ Enviar Solicitação</button>
    </form>
  </div>

  <!-- Histórico de Minhas Solicitações -->
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">📜 Minhas Solicitações Recentes</h2>
    </div>
    <div id="minhasSolicitacoes"></div>
  </div>
</section>
```

---

### **2. ABA "PEDIDOS" - ATUALIZAÇÃO**

**Novas Funcionalidades:**
- **Baixa de Produtos** - Dar saída no estoque quando pedido for entregue
- **Status mais detalhado** - Separar "Em Compra" de "Aguardando Entrega"
- **Filtro por solicitante** - Ver pedidos de um usuário específico

**Nova Ação: "Dar Baixa"**

Aparece quando pedido está em status "Aguardando Entrega"

**Modal de Baixa:**
```html
<div class="modal" id="modalBaixaPedido">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">📦 Dar Baixa no Pedido</h3>
      <button class="modal-close" onclick="closeModal('modalBaixaPedido')">&times;</button>
    </div>

    <p>Confirma a baixa dos produtos deste pedido no estoque?</p>

    <div id="produtosBaixa">
      <!-- Lista de produtos que terão saída -->
    </div>

    <div style="display: flex; gap: 10px; margin-top: 20px;">
      <button class="btn btn-success" onclick="confirmarBaixa()">
        ✅ Confirmar Baixa
      </button>
      <button class="btn btn-secondary" onclick="closeModal('modalBaixaPedido')">
        ❌ Cancelar
      </button>
    </div>
  </div>
</div>
```

**Nova Função JavaScript:**
```javascript
function darBaixaPedido(pedidoId) {
  // Buscar produtos do pedido
  google.script.run
    .withSuccessHandler(function(response) {
      if (response.success) {
        // Mostrar modal com produtos
        renderModalBaixa(response.pedido);
        openModal('modalBaixaPedido');
      }
    })
    .withFailureHandler(showError)
    .__getPedidoById(pedidoId);
}

function confirmarBaixa() {
  const pedidoId = document.getElementById('baixaPedidoId').value;

  showLoading();
  google.script.run
    .withSuccessHandler(function(response) {
      hideLoading();
      if (response.success) {
        showSuccess('Baixa realizada com sucesso!');
        closeModal('modalBaixaPedido');
        loadPedidos(); // Recarregar lista
      } else {
        showError('Erro ao dar baixa: ' + response.error);
      }
    })
    .withFailureHandler(function(error) {
      hideLoading();
      showError('Erro: ' + error.message);
    })
    .__darBaixaPedido(pedidoId);
}
```

---

### **3. ABA "PRODUTOS" - UPLOAD DE FOTOS**

**Nova Coluna no Banco:** `Imagem URL`

**Nova Funcionalidade:** Upload de imagem via Google Drive

**Modal Atualizado:**
```html
<div class="modal" id="modalNovoProduto">
  <div class="modal-content" style="max-width: 800px;">
    <div class="modal-header">
      <h3 class="modal-title">➕ Novo Produto</h3>
      <button class="modal-close" onclick="closeModal('modalNovoProduto')">&times;</button>
    </div>

    <form id="formNovoProduto" onsubmit="submitNovoProduto(event)">
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Código *</label>
          <input type="text" class="form-control" id="novoProdutoCodigo" required>
        </div>

        <div class="form-group">
          <label class="form-label">Nome *</label>
          <input type="text" class="form-control" id="novoProdutoNome" required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Tipo *</label>
          <select class="form-control" id="novoProdutoTipo" required>
            <option value="">Selecione...</option>
            <option value="Papelaria">Papelaria</option>
            <option value="Limpeza">Limpeza</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Categoria</label>
          <input type="text" class="form-control" id="novoProdutoCategoria">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Unidade</label>
          <select class="form-control" id="novoProdutoUnidade">
            <option value="UN">Unidade</option>
            <option value="CX">Caixa</option>
            <option value="PCT">Pacote</option>
            <option value="KG">Quilograma</option>
            <option value="L">Litro</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Preço Unitário (R$)</label>
          <input type="number" step="0.01" class="form-control" id="novoProdutoPreco">
        </div>
      </div>

      <!-- NOVO: Upload de Imagem -->
      <div class="form-group">
        <label class="form-label">Foto do Produto</label>
        <input type="file" accept="image/*" id="produtoImagem"
               onchange="previewImage(event)" class="form-control">
        <div class="image-preview" id="imagePreview">
          <div class="image-preview-placeholder">
            📷 Nenhuma imagem selecionada
          </div>
        </div>
        <small style="color: #666;">
          A imagem será armazenada no Google Drive e vinculada ao produto.
        </small>
      </div>

      <div class="form-group">
        <label class="form-label">Descrição</label>
        <textarea class="form-control" id="novoProdutoDescricao" rows="3"></textarea>
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button type="submit" class="btn btn-success" style="flex: 1;">
          ✅ Salvar Produto
        </button>
        <button type="button" class="btn btn-secondary"
                onclick="closeModal('modalNovoProduto')" style="flex: 1;">
          ❌ Cancelar
        </button>
      </div>
    </form>
  </div>
</div>
```

**Funções JavaScript para Upload:**
```javascript
function previewImage(event) {
  const file = event.target.files[0];
  const preview = document.getElementById('imagePreview');

  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      preview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
    };
    reader.readAsDataURL(file);
  }
}

function submitNovoProduto(event) {
  event.preventDefault();

  const fileInput = document.getElementById('produtoImagem');
  const file = fileInput.files[0];

  showLoading();

  // Se há imagem, fazer upload primeiro
  if (file) {
    uploadImagemProduto(file, function(imageUrl) {
      salvarProdutoComImagem(imageUrl);
    });
  } else {
    salvarProdutoComImagem(null);
  }
}

function uploadImagemProduto(file, callback) {
  const reader = new FileReader();
  reader.onload = function(e) {
    const base64 = e.target.result.split(',')[1];
    const fileName = file.name;
    const mimeType = file.type;

    google.script.run
      .withSuccessHandler(function(response) {
        if (response.success) {
          callback(response.imageUrl);
        } else {
          hideLoading();
          showError('Erro ao fazer upload da imagem: ' + response.error);
        }
      })
      .withFailureHandler(function(error) {
        hideLoading();
        showError('Erro no upload: ' + error.message);
      })
      .__uploadImagemDrive(base64, fileName, mimeType);
  };
  reader.readAsDataURL(file);
}

function salvarProdutoComImagem(imageUrl) {
  const produto = {
    codigo: document.getElementById('novoProdutoCodigo').value,
    nome: document.getElementById('novoProdutoNome').value,
    tipo: document.getElementById('novoProdutoTipo').value,
    categoria: document.getElementById('novoProdutoCategoria').value,
    unidade: document.getElementById('novoProdutoUnidade').value,
    preco: parseFloat(document.getElementById('novoProdutoPreco').value) || 0,
    descricao: document.getElementById('novoProdutoDescricao').value,
    imagemUrl: imageUrl || ''
  };

  google.script.run
    .withSuccessHandler(function(response) {
      hideLoading();
      if (response.success) {
        showSuccess('Produto salvo com sucesso!');
        closeModal('modalNovoProduto');
        loadProdutos();
      } else {
        showError('Erro ao salvar produto: ' + response.error);
      }
    })
    .withFailureHandler(function(error) {
      hideLoading();
      showError('Erro: ' + error.message);
    })
    .__createProduto(produto);
}
```

---

### **4. ABA "ESTOQUE" - APENAS ENTRADA**

**Mudança:** Remover funcionalidade de "Saída Manual"

**Motivo:** Saídas agora são feitas APENAS via aba "Pedidos" (dar baixa)

**Funcionalidades Mantidas:**
- ✅ Visualizar estoque atual
- ✅ Entrada de produtos (compras, reposição)
- ✅ Ajuste de estoque (inventário)
- ❌ ~~Saída manual~~ (REMOVIDO)

**Atualização na Interface:**
```html
<section class="page-section" id="page-estoque">
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">📊 Controle de Estoque</h2>
      <div>
        <button class="btn btn-primary" onclick="openModal('modalEntradaEstoque')">
          ⬆️ Entrada de Produtos
        </button>
        <button class="btn btn-outline" onclick="openModal('modalAjusteEstoque')">
          🔧 Ajuste de Estoque
        </button>
      </div>
    </div>

    <!-- Removido: botão "Saída de Produtos" -->

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Código</th>
            <th>Produto</th>
            <th>Tipo</th>
            <th>Qtd. Atual</th>
            <th>Qtd. Mínima</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="estoqueTableBody"></tbody>
      </table>
    </div>
  </div>
</section>
```

---

### **5. ABA "MOVIMENTAÇÃO" (antes "GERENCIAMENTO")**

**Correção de Bug:** Erro "Cannot read properties of null"

**Causa:** Função `getAnaliseProdutos()` retornando `null`

**Solução:**
1. Verificar se função existe no backend
2. Adicionar tratamento de erro robusto
3. Adicionar fallback com dados vazios

**Código Corrigido:**
```javascript
function loadMovimentacao() {
  showLoading();

  google.script.run
    .withSuccessHandler(function(response) {
      try {
        hideLoading();

        // Verificar se resposta é válida
        if (!response) {
          console.error('❌ Resposta vazia ao carregar movimentação');
          renderMovimentacaoEmpty();
          return;
        }

        if (response.success && response.analise) {
          renderMovimentacaoKPIs(response.analise);
          renderProdutosAlerta(response.analise.produtosEmAlerta || []);
        } else {
          console.error('Erro:', response.error);
          renderMovimentacaoEmpty();
        }
      } catch (error) {
        console.error('❌ Erro ao processar movimentação:', error);
        renderMovimentacaoEmpty();
      }
    })
    .withFailureHandler(function(error) {
      hideLoading();
      console.error('❌ Erro de conexão:', error);
      showError('Erro ao carregar dados de movimentação');
      renderMovimentacaoEmpty();
    })
    .__getAnaliseProdutos(); // Verificar se existe no wrapper

  // Carregar histórico
  loadHistoricoMovimentacoes();
}

function renderMovimentacaoEmpty() {
  const container = document.getElementById('gerenciamentoKpiGrid');
  if (container) {
    container.innerHTML = `
      <div class="alert alert-info">
        ℹ️ Nenhum dado disponível no momento
      </div>
    `;
  }
}
```

---

### **6. ABA "RELATÓRIOS" - MÚLTIPLOS RELATÓRIOS**

**Objetivo:** Fornecer análises profundas com insights acionáveis

**Estrutura:**
```html
<section class="page-section" id="page-relatorios">
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">📈 Relatórios e Insights</h2>
    </div>

    <!-- Seletores de Relatório -->
    <div class="filter-grid" style="margin-bottom: 30px;">
      <div class="form-group">
        <label class="form-label">Tipo de Relatório</label>
        <select class="form-control" id="tipoRelatorio" onchange="loadRelatorio()">
          <option value="visao_geral">Visão Geral</option>
          <option value="financeiro">Análise Financeira</option>
          <option value="logistico">Análise Logística</option>
          <option value="estoque">Análise de Estoque</option>
          <option value="produtos">Análise de Produtos</option>
          <option value="usuarios">Análise de Usuários</option>
          <option value="tendencias">Tendências e Previsões</option>
          <option value="comparativo">Comparativo de Períodos</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Período</label>
        <select class="form-control" id="periodoRelatorio" onchange="loadRelatorio()">
          <option value="7">Últimos 7 dias</option>
          <option value="30" selected>Últimos 30 dias</option>
          <option value="90">Últimos 90 dias</option>
          <option value="180">Últimos 6 meses</option>
          <option value="365">Último ano</option>
          <option value="custom">Personalizado</option>
        </select>
      </div>

      <div class="form-group">
        <button class="btn btn-primary" onclick="loadRelatorio()" style="width: 100%;">
          🔄 Atualizar Relatório
        </button>
      </div>

      <div class="form-group">
        <button class="btn btn-success" onclick="exportarRelatorio()" style="width: 100%;">
          📥 Exportar para Excel
        </button>
      </div>
    </div>

    <!-- Container do Relatório -->
    <div id="relatorioContainer"></div>
  </div>
</section>
```

**8 Tipos de Relatórios:**

1. **Visão Geral**
   - Resumo consolidado de todos os KPIs
   - Principais alertas e recomendações
   - Gráficos de tendências gerais

2. **Análise Financeira**
   - Gastos por tipo, setor, produto
   - Evolução mensal/trimestral
   - Comparação com orçamento/metas
   - Top produtos mais caros
   - Oportunidades de economia

3. **Análise Logística**
   - Tempos médios de cada fase
   - Taxa de aprovação/cancelamento
   - Eficiência de processamento
   - Gargalos identificados
   - Solicitantes mais ativos

4. **Análise de Estoque**
   - Giro de estoque por produto
   - Produtos com ruptura frequente
   - Produtos parados (sem movimentação)
   - Previsão de reposição
   - Custo de armazenagem

5. **Análise de Produtos**
   - Produtos mais solicitados
   - Produtos nunca solicitados
   - Valor médio por produto
   - Correlação entre produtos
   - Sugestões de mix

6. **Análise de Usuários**
   - Solicitações por usuário
   - Gastos por departamento
   - Padrões de solicitação
   - Usuários mais ativos/inativos

7. **Tendências e Previsões**
   - Previsão de gastos próximos 3 meses
   - Produtos que precisarão reposição
   - Tendências sazonais
   - Alertas preventivos

8. **Comparativo de Períodos**
   - Comparação mês a mês
   - Crescimento/redução de gastos
   - Identificação de anomalias
   - Análise de variações

---

### **7. ABA "CONFIGURAÇÕES" - CORREÇÕES**

**Bug 1:** Erro "carregarUsuarios is not defined"

**Causa:** Função não existe ou não está no escopo global

**Solução:**
```javascript
// Garantir que função existe
function loadConfiguracoes() {
  if (currentUser.perfil !== 'Admin') {
    document.getElementById('configContent').innerHTML = `
      <div class="alert alert-warning">
        ⚠️ Acesso restrito a administradores
      </div>
    `;
    return;
  }

  // Renderizar interface de configurações
  renderConfigInterface();

  // Carregar usuários
  carregarUsuarios();

  // Carregar configurações de sistema
  carregarConfigSistema();
}

function carregarUsuarios() {
  showLoading();
  google.script.run
    .withSuccessHandler(function(response) {
      hideLoading();
      if (response.success) {
        renderUsuariosTable(response.usuarios);
      } else {
        showError('Erro ao carregar usuários: ' + response.error);
      }
    })
    .withFailureHandler(function(error) {
      hideLoading();
      showError('Erro: ' + error.message);
    })
    .__getUsuarios();
}

function renderConfigInterface() {
  const container = document.getElementById('configContent');
  container.innerHTML = `
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
      <!-- Painel Usuários -->
      <div class="card">
        <h3>👥 Gerenciamento de Usuários</h3>
        <button class="btn btn-primary" onclick="openModal('modalNovoUsuario')">
          ➕ Adicionar Usuário
        </button>
        <div id="usuariosTable" style="margin-top: 20px;"></div>
      </div>

      <!-- Painel Configurações de Sistema -->
      <div class="card">
        <h3>⚙️ Configurações de Sistema</h3>
        <form id="formConfigSistema">
          <div class="form-group">
            <label class="form-label">Cor Primária</label>
            <input type="color" class="form-control" id="configCorPrimaria"
                   value="#00A651">
          </div>

          <div class="form-group">
            <label class="form-label">Cor Secundária</label>
            <input type="color" class="form-control" id="configCorSecundaria"
                   value="#2C3E50">
          </div>

          <button type="submit" class="btn btn-success">
            ✅ Salvar Configurações
          </button>
        </form>
      </div>
    </div>
  `;
}
```

**Bug 2:** Cores não funcionam

**Causa:** Variáveis CSS não estão sendo atualizadas dinamicamente

**Solução:**
```javascript
function aplicarCoresPersonalizadas(corPrimaria, corSecundaria) {
  // Atualizar variáveis CSS
  document.documentElement.style.setProperty('--primary', corPrimaria);
  document.documentElement.style.setProperty('--secondary', corSecundaria);

  // Salvar no localStorage para persistir
  localStorage.setItem('cor_primaria', corPrimaria);
  localStorage.setItem('cor_secundaria', corSecundaria);
}

// Ao carregar página, aplicar cores salvas
window.addEventListener('DOMContentLoaded', function() {
  const corPrimaria = localStorage.getItem('cor_primaria');
  const corSecundaria = localStorage.getItem('cor_secundaria');

  if (corPrimaria) {
    document.documentElement.style.setProperty('--primary', corPrimaria);
  }
  if (corSecundaria) {
    document.documentElement.style.setProperty('--secondary', corSecundaria);
  }
});
```

---

## 📦 NOVOS ARQUIVOS BACKEND

### **1. 07.relatorios.js**

Funções para gerar todos os 8 tipos de relatórios

**Funções principais:**
- `getRelatorioVisaoGeral(periodo)`
- `getRelatorioFinanceiro(periodo)`
- `getRelatorioLogistico(periodo)`
- `getRelatorioEstoque(periodo)`
- `getRelatorioProdutos(periodo)`
- `getRelatorioUsuarios(periodo)`
- `getRelatorioTendencias(periodo)`
- `getRelatorioComparativo(periodo1, periodo2)`

### **2. 08.upload_imagens.js**

Funções para upload e gestão de imagens no Google Drive

**Funções principais:**
- `uploadImagemDrive(base64, fileName, mimeType)` - Faz upload e retorna URL
- `criarPastaImagensProdutos()` - Cria pasta organizada no Drive
- `deletarImagemDrive(imageUrl)` - Remove imagem ao deletar produto
- `getImageUrl(fileId)` - Converte ID do Drive para URL pública

---

## 🔄 ARQUIVOS BACKEND ATUALIZADOS

### **1. 00.funcoes_wrapper.js**

Adicionar wrappers:
```javascript
function __uploadImagemDrive(base64, fileName, mimeType) {
  try {
    return serializarParaFrontend(uploadImagemDrive(base64, fileName, mimeType));
  } catch (e) {
    return { success: false, error: e.message };
  }
}

function __darBaixaPedido(pedidoId) {
  try {
    return serializarParaFrontend(darBaixaPedido(pedidoId));
  } catch (e) {
    return { success: false, error: e.message };
  }
}

function __getRelatorio(tipo, periodo) {
  try {
    return serializarParaFrontend(getRelatorio(tipo, periodo));
  } catch (e) {
    return { success: false, error: e.message };
  }
}

function __getAnaliseProdutos() {
  try {
    return serializarParaFrontend(getAnaliseProdutos());
  } catch (e) {
    return { success: false, error: e.message };
  }
}

function __getUsuarios() {
  try {
    return serializarParaFrontend(getUsuarios());
  } catch (e) {
    return { success: false, error: e.message };
  }
}
```

### **2. 02.pedidos.js**

Adicionar função:
```javascript
function darBaixaPedido(pedidoId) {
  // 1. Buscar pedido
  // 2. Validar status (deve estar em "Aguardando Entrega")
  // 3. Para cada produto do pedido:
  //    - Dar saída no estoque
  //    - Registrar movimentação
  // 4. Atualizar status do pedido para "Finalizado"
  // 5. Registrar data de finalização
}
```

---

## ✅ CHECKLIST DE IMPLEMENTAÇÃO

### **Banco de Dados:**
- [ ] Adicionar coluna "Imagem URL" na aba Produtos
- [ ] Adicionar coluna "Pedido ID" na aba Movimentações (se não existir)
- [ ] Criar aba "Relatorios_Config" (opcional)

### **Backend:**
- [ ] Criar arquivo `07.relatorios.js`
- [ ] Criar arquivo `08.upload_imagens.js`
- [ ] Atualizar `00.funcoes_wrapper.js` com novos wrappers
- [ ] Atualizar `02.pedidos.js` com função `darBaixaPedido`

### **Frontend:**
- [ ] Criar `Index_v8.html` com todas as mudanças
- [ ] Atualizar menu de navegação
- [ ] Criar aba "Solicitação"
- [ ] Atualizar aba "Pedidos" com baixa de produtos
- [ ] Atualizar aba "Produtos" com upload de fotos
- [ ] Atualizar aba "Estoque" (remover saída manual)
- [ ] Renomear e corrigir aba "Gerenciamento" → "Movimentação"
- [ ] Criar aba "Relatórios" completa
- [ ] Corrigir aba "Configurações"

---

**Versão:** 8.0
**Data:** 31 de outubro de 2025
**Arquiteto:** Claude Sonnet 4.5
